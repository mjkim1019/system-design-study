- 채팅 앱의 종류: 1:1 채팅, 그룹 채팅, 그룹 음성 채팅

- 어떤 종류의 채팅 앱을 만들 것인지 확인하는 것이 중요하다.
  1. 1:1 or 그룹
  2. 앱 or 웹
  3. 트래픽 규모(eg. DAU)
  4. 그룹채팅 최대 인원
  5. 중요기능 파악 - 1:1 채팅, 그룹 채팅, 사용자 접속상태 표시, 텍스트만 지원 등
  6. 메시지 최대 길이
  7. 종단 간 암호화 지원여부
  8. 채팅 이력 보관 기간
 
  만들고자하는 채팅 앱:
  - 응답지연이 낮은 1:1 채팅 기능
  - 최대 100명까지 참여할 수 있는 그룹 채팅 기능
  - 사용자의 접속상태 표시 기능
  - 다양한 단말 지원. 하나의 계정으로 여러 단말에 동시 접속 지원
  - 푸시 알림
  - 5천만 DAU 처리

   메시지 송수신 클라이언트와 채팅 서비스와의 관계
    ![image](https://github.com/user-attachments/assets/d4a65a04-bb66-4b6f-8c84-195a55f60b17)

  1. 송신 클라이언트 -> 서버(채팅 서비스)
     HTTP 프로토콜
     keep-alive 헤더 사용
     ![image](https://github.com/user-attachments/assets/7ba4f535-4404-439a-ae51-b94114f63b8c)
      https://www.hostinger.co.uk/tutorials/improving-website-performance-enabling-keep-alive
     
  3. 서버(채팅 서비스) -> 수신 클라이언트
     서버가 클라이언트와의 연결을 만드는 것처럼 동작하게 하는 방법 3가지: 폴링, 롱 폴링, 웹소켓
     - 폴링: 클라이언트가 서버에게 주기적으로 새 메시지가 있는지 물어보는 방법 - 계속 새로운 연결 생성 및 종료
     -   단점: 많이 자주 물어볼수록 비용 증가 및 자원 낭비
     ![image](https://github.com/user-attachments/assets/bdf0017d-d272-4734-b3a5-2bcb09d33db6)
     - 롱 폴링: 서버로부터 새 메시지가 반환되거나 타임아웃 될 때까지 클라이언트가 연결을 유지하는 방법 - 새 메시지가 반환되거나 타임아웃되면 연결 종료 및 새로운 연결 생성
     -   단점: 송수신 클라이언트가 같은 채팅 서버와 연결되지 않을 수 있다.(무상태 지원), 서버 입장에서는 클라이언트가 연결을 해제했는지 아닌지 알 좋은 방법이 없다. 비효율적
     ![image](https://github.com/user-attachments/assets/7d984a9a-7fff-4cc2-91c7-dec5ee2935a7)
     - 웹소켓: 서버가 클라이언트에게 비동기 메시지를 보낼 때 가장 널리 사용하는 기술
     ![image](https://github.com/user-attachments/assets/69a921dc-adc5-430e-af48-d71eb8b7b328)



     



