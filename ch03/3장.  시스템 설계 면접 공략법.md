# 3장.  시스템 설계 면접 공략법

시스템 설계 면접은 모호한 문제를 어떻게 해결해가는지 과정을 보기 위한 시뮬레이션이다.

기술 시연 능력, 설계 과정에서 내린 결정들에 대한 방어 능력, 면접관들의 피드백을 건설적인 방식으로 처리할 수 있는지를 확인하는 것이다. 이를 통해 지원자가 협력을 잘 할 수 있는 사람인지, 압박을 헤쳐나가며 문제해결할 수 있는 능력을 가진 사람인지 확인하는 것이다. 간혹 설계의 순수성에 집착해 tradeoff를 하지 못해 시스템의 전반적인 비용을 올리는 경우가 있기 때문이다.

## 효과적인 면접을 위한 4단계 접근법

### 1단계. 문제 이해 및 설계 범위 확정 : 3-10분

가장 먼저 속도를 늦춰라. 깊이 생각하고 질문하여 요구사항과 가정들을 분명히 하고, 정보를 모아라.

요구사항을 정확히 이해하는 데 필요한 질문이 무엇일까? 예를 들어 아래와 같은 질문들이 있을 수 있다.

- 구체적으로 어떤 기능들을 만들어야 하나요? 주 기능이 무엇인가요?
- 제품 사용자 수는 얼마나 되나요?
- 회사의 규모는 얼마나 빨리 커지리라 예상하나요? 3달, 6달, 1년 뒤 회사 규모가 얼마가 될 것이라 예상하시나요?
- 회사가 주로 사용하는 기술 스택은 무엇인가요?
- 설계를 단순화하기 위해 기존에 활용할 수 있는 서비스로는 어떤 것들이 있나요?

- **예시**
    
    뉴스 피드 시스템을 설계하라는 요구를 받았다고 가정해보자. 그럼 아래와 같은 대화가 오고 갈 것임을 예상할 수 있다.
    
    - 모바일 앱과 웹 가운데 어느 쪽을 지원해야 하나요? 아니면 둘 다 인가요?
    - 둘 다 지원해야 합니다.
    - 가장 중요한 기능은 무엇인가요?
    - 새로운 포스트를 올리고, 다른 친구의 피드를 볼 수 있도록 하는 기능입니다.
    - 피드는 어떤 순서로 정렬되어야 하나요? 예를 들어 시간 역순이나, 친한 친구 그룹으로 가중치를 두어 앞서 보여주는 등을 기준으로 정렬이 될 수 있을거라는 생각이 듭니다.
    - 단순하게 만들기 위해, 시간 역순으로 가정합니다.
    - 한 사용자는 최대 몇 명의 사용자와 친구를 맺을 수 있나요?
    - 5000명입니다
    - 사이트로 오는 트래픽 규모는 어느 정도입니까?
    - DAU는 천만 명입니다.
    - 피드에 이미지나 비디오도 올라올 수 있나요? 아니면 그저 텍스트입니까?
    - 이미지나 미디어 파일 포스트도 가능합니다.

### 2단계. 개략적인 설계안 제시 및 동의 구하기 : 10-15분

이 단계에서는 면접관을 팀원처럼 생각하며 협력하면 좋다. 

- 개략적인 설계안을 제시한 후 면접관에게 의견을 구하라.
- 핵심 컴포넌트로 클라이언트(웹, 모바일), API, 웹 서버, DB, 캐시, CDN, 메시지 큐 등을 포함해서 다이어그램을 그려라.
- 개략적인 규모를 추정 및 계산하라. 그리고 그 과정을 소리내어 말하라.

### 3단계. 상세 설계 : 10-25분

이제 개략적인 설계안은 완성되었으니, 상세 설계를 할 차례이다.

- 시스템이 달성해야하는 목표와 기능 범위를 확인하자
- 상세 설계에서 집중해야할 영역들을 확인하자 (우선순위를 정하자)
    - 예를 들어, 단축 URL 생성기 설계라면, 해시 함수 설계를 구체적으로 어떻게 할 것인지를 듣고 싶어할 것이다.
    - 예를 들어, 채팅 시스템이라면, 어떻게하면 지연 상태를 줄이고 사용자의 온/오프라인 상태를 표시할 것인가를 듣고자 할 것이다.

### 4단계. 마무리 : 3-5분

면접관은 마무리 후속 질문으로, 시스템 병목 구간이나 개선 가능한 지점을 찾아내라 주문할 수 있다. 이에 대한 대답을 어떻게 하면 좋을까?

- 설계를 다시 한번 요약해주자
- 오류가 발생하면 어떤 일이 생기는지 따져보자
- 운영에서 발생할 수 있는 이슈도 가정해보자. 메트릭은 어떻게 수집하고 모니터링 할 것인지. 로그는 어떻게 볼 것인지. 시스템은 어떻게 배포할 것인지 생각해볼 수 있다.
- 미래에 규모 확장 요구에 어떻게 대처할 것인지에 대해 생각해 볼 수 있다.

## 정리

**해야할 것**

- 질문을 통해 요구사항을 최대한 뾰족하게 이해하자.
- 여러 해법을 함께 제시하자.
- 면접관을 같은 팀원이라고 생각하자.
- 설계 청사진을 그린 후 면접관에게 동의를 얻자.
- 동의 후, 컴포넌트 간 우선순위를 정하고 세부사항에 대한 설명을 하자.

**하지 말아야 할 것**

- 요구사항이나 가정을 분명히 하지 않고, 빠르게 설계를 제시하지 마라
- 막혔다면, 힌트 청하기를 주저하지 마라
- 면접관에게 의견을 일찍, 그리고 자주 구하라.
